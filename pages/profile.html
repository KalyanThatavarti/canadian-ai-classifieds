<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="User Profile | Canadian AI Classifieds">
    <title>Profile | Canadian AI Classifieds</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/header.css">
    <link rel="stylesheet" href="../css/profile.css?v=4">
    <link rel="stylesheet" href="../css/toast.css">
    <link rel="stylesheet" href="../css/loading.css">
</head>

<body>
    <!-- Skip Navigation -->
    <a href="#main-content" class="skip-to-main">Skip to main content</a>

    <!-- Premium Glassmorphic Header -->
    <header class="site-header">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="top-bar-container">
                <div class="top-bar-left">
                    <a href="#" class="location-selector">
                        <svg class="location-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z">
                            </path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        </svg>
                        <span>Toronto, ON</span>
                    </a>
                </div>
                <div class="top-bar-right">
                    <a href="#" class="help-link">
                        <svg class="help-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z">
                            </path>
                        </svg>
                        <span>Help Center</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- Main Header -->
        <div class="main-header">
            <div class="main-header-container">
                <!-- Logo -->
                <a href="../index.html" class="header-logo">
                    <div class="logo-text">
                        <span class="logo-icon">üçÅ</span>
                        <div>
                            Canadian Classifieds
                            <div class="logo-tagline">AI-Powered</div>
                        </div>
                    </div>
                </a>

                <!-- Navigation -->
                <nav class="main-nav">
                    <ul class="nav-menu">
                        <li class="nav-item">
                            <a href="../index.html" class="nav-link">Home</a>
                        </li>
                        <li class="nav-item">
                            <a href="browse-listings.html" class="nav-link">Browse Listings</a>
                        </li>
                        <li class="nav-item">
                            <a href="../index.html#how-it-works" class="nav-link">How It Works</a>
                        </li>
                        <li class="nav-item">
                            <a href="../index.html#safety" class="nav-link">Safety & Trust</a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">About</a>
                        </li>
                    </ul>
                </nav>

                <!-- Header Actions -->
                <div class="header-actions">
                    <button class="search-toggle" aria-label="Search">
                        <svg class="search-icon-header" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                    </button>

                    <button class="post-ad-btn">
                        <svg class="post-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4">
                            </path>
                        </svg>
                        <span>Post Your Ad</span>
                    </button>

                    <button class="user-menu-toggle" aria-label="User menu">
                        <svg class="user-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                    </button>

                    <button class="mobile-menu-toggle" aria-label="Toggle menu">
                        <svg class="hamburger-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content" class="profile-page">
        <div class="profile-container">

            <!-- Profile Header -->
            <div class="profile-header-card">
                <div class="profile-header-content">
                    <div class="profile-avatar-section">
                        <div class="profile-avatar-wrapper">
                            <img id="profileAvatar" src="https://i.pravatar.cc/150?img=1" alt="Profile"
                                class="profile-avatar">
                            <button id="uploadAvatarBtn" class="upload-avatar-btn" style="display: none;">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z">
                                    </path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                            </button>
                            <input type="file" id="avatarInput" accept="image/*" style="display: none;">
                        </div>
                    </div>

                    <div class="profile-info">
                        <div class="profile-name-row">
                            <h1 id="profileName" class="profile-name">Loading...</h1>
                            <div id="verificationBadges" class="verification-badges"></div>
                        </div>
                        <div class="profile-meta">
                            <div class="meta-item">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z">
                                    </path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                <span id="profileLocation">-</span>
                            </div>
                            <div class="meta-item">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z">
                                    </path>
                                </svg>
                                <span id="profileJoinDate">Member since -</span>
                            </div>
                        </div>
                    </div>

                    <div class="profile-actions">
                        <button id="editProfileBtn" class="btn btn-primary" style="display: none;">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z">
                                </path>
                            </svg>
                            Edit Profile
                        </button>
                    </div>
                </div>
            </div>

            <!-- Statistics Dashboard -->
            <div class="stats-dashboard">
                <div class="stat-card">
                    <div class="stat-icon">üè∑Ô∏è</div>
                    <div class="stat-value" id="statListings">0</div>
                    <div class="stat-label">Listings</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-value" id="statSales">0</div>
                    <div class="stat-label">Sold</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚≠ê</div>
                    <div class="stat-value" id="statRating">-</div>
                    <div class="stat-label">Rating</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üõ°Ô∏è</div>
                    <div class="stat-value" id="statTrust">0</div>
                    <div class="stat-label">Trust Score</div>
                </div>
            </div>

            <!-- About Section (View Mode) -->
            <div id="aboutSection" class="profile-section">
                <h2 class="section-title">About</h2>
                <p id="profileBio" class="profile-bio">No bio provided.</p>
            </div>

            <!-- Edit Form (Hidden by default) -->
            <div id="editForm" class="profile-section edit-form" style="display: none;">
                <h2 class="section-title">Edit Profile</h2>
                <form id="profileEditForm">
                    <div class="form-group">
                        <label for="editName">Display Name</label>
                        <input type="text" id="editName" required maxlength="50">
                    </div>

                    <div class="form-group">
                        <label for="editBio">Bio</label>
                        <textarea id="editBio" maxlength="500" rows="4"
                            placeholder="Tell us about yourself..."></textarea>
                        <small class="char-count"><span id="bioCount">0</span>/500</small>
                    </div>

                    <div class="form-group">
                        <label for="editStreet">Street Address</label>
                        <input type="text" id="editStreet" placeholder="e.g., 123 Main Street">
                    </div>

                    <div class="form-group">
                        <label for="editApartment">Apartment/Unit (Optional)</label>
                        <input type="text" id="editApartment" placeholder="e.g., Apt 4B, Unit 205">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="editCity">City</label>
                            <input type="text" id="editCity" placeholder="e.g., Toronto" required>
                        </div>
                        <div class="form-group">
                            <label for="editProvince">Province</label>
                            <select id="editProvince" required>
                                <option value="">Select Province</option>
                                <option value="ON">Ontario</option>
                                <option value="QC">Quebec</option>
                                <option value="BC">British Columbia</option>
                                <option value="AB">Alberta</option>
                                <option value="MB">Manitoba</option>
                                <option value="SK">Saskatchewan</option>
                                <option value="NS">Nova Scotia</option>
                                <option value="NB">New Brunswick</option>
                                <option value="PE">Prince Edward Island</option>
                                <option value="NL">Newfoundland and Labrador</option>
                                <option value="NT">Northwest Territories</option>
                                <option value="YT">Yukon</option>
                                <option value="NU">Nunavut</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="editPostalCode">Postal Code</label>
                        <input type="text" id="editPostalCode" placeholder="A1A 1A1" maxlength="7"
                            pattern="[A-Za-z][0-9][A-Za-z] ?[0-9][A-Za-z][0-9]"
                            title="Enter a valid Canadian postal code (e.g., A1A 1A1)">
                        <small style="color: #666; font-size: 0.875rem; display: block; margin-top: 0.25rem;">Format:
                            A1A 1A1</small>
                    </div>

                    <div class="form-group">
                        <label for="editPhone">Phone Number (Optional)</label>
                        <input type="tel" id="editPhone" placeholder="(123) 456-7890">
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                        <button type="button" id="cancelEditBtn" class="btn btn-secondary">Cancel</button>
                    </div>
                </form>
            </div>

        </div>
    </main>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>

    <!-- Scripts -->
    <script src="../js/utils.js"></script>
    <script src="../js/ui-components.js"></script>
    <script src="../js/firebase-config.js?v=3"></script>
    <script src="../js/favorites-utils.js?v=9"></script>
    <script src="../js/sample-data.js"></script>
    <script src="../js/header.js?v=11"></script>
    <script src="../js/profile.js"></script>
</body>

</html>